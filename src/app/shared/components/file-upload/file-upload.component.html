<div class="file-upload-wrapper"
     [ngClass]="{'mobile': data.isMobile, 'tablet': data.isTablet, 'desktop': data.isDesktop}">
    <h2>Upload {{ selectedFiles.length > 1 ? 'Files' : 'File' }}</h2>
    <p class="info">Enter a name (for single file) and select {{ selectedFiles.length > 1 ? 'files' : 'a file' }} to upload.</p>
    <p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
    <form (ngSubmit)="uploadFile()">
        <div class="form-group" *ngIf="selectedFiles.length <= 1">
            <label for="name" title="Enter file name">File Name</label>
            <input id="name" [(ngModel)]="name" name="name" [required]="selectedFiles.length === 1" title="Required for single file upload">
        </div>
        <div class="form-group">
            <label for="file" title="Select files">Select {{ selectedFiles.length > 1 ? 'Files' : 'File' }}</label>
            <input id="file" type="file" (change)="onFileSelected($event)" [multiple]="true" required title="Required for file upload">
        </div>
        <div class="file-preview" *ngIf="selectedFiles.length > 1">
            <h3>Selected Files ({{selectedFiles.length}})</h3>
            <div class="file-grid">
                <div class="file-card" *ngFor="let file of selectedFiles; let i = index">
                    <div class="file-info">
                        <span class="file-name">{{ file.name }}</span>
                        <span class="file-size">{{ (file.size / 1024 / 1024).toFixed(2) }} MB</span>
                    </div>
                    <button type="button" class="remove-btn" (click)="removeFile(i)" title="Remove file">Ã—</button>
                </div>
            </div>
        </div>
        <div class="actions">
            <button type="submit" [disabled]="loading" title="Upload the files">
                {{ loading ? 'Uploading...' : 'Upload' }}
            </button>
            <button type="button" mat-dialog-close title="Cancel upload">Cancel</button>
        </div>
    </form>
</div>